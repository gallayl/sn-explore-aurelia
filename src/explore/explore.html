<template>
    <require from='./explore.scss'></require>
    <require from='./add-content'></require>
    <require from='./explore-edit'></require>
    <section class="au-animate">
        <div class='explore-wrapper row' resizeable resize.trigger="resize($event.detail)">
            <md-card if.bind="!isMobile" class="col xl2 l4 m4 hide-on-small-only">
                <tree content.bind="RootContent" selection.two-way='Selection'></tree>
            </md-card>
            
            <i md-waves class="explore-mobile-nav material-icons left hide-on-med-and-up" 
                md-sidenav-collapse="ref.bind: sideNav;">menu</i>
            <md-sidenav view-model.ref="sideNav">
                <tree if.bind="isMobile" content.bind="RootContent" selection.two-way='Selection'></tree>
            </md-sidenav>

            

            <div class="content-wrapper col xl10 l8 m8 s12">
                <div class='card'>
                    <div class='card-content'>
                        <span class='card-title'>
                            <breadcrumbs selection.two-way="Selection" path-change.call="changePath(path)"></breadcrumbs>
                        </span>
                        <content-list scope.bind="Selection" 
                                    get-items.call="GetSelectedChildren(scope, query)"
                                    on-activate.call="EditItem(content)"></content-list>
                    </div>
                </div>
            </div>


            <div md-modal md-modal.ref="editModal">
                <div class='modal-content'>
                    <h4>${EditedContent.DisplayName || EditedContent.Name}</h4>
                    <content-view content.bind='EditedContent' action-name='edit'></content-view>
                </div>
                <div class="modal-footer">
                    <a click.delegate="EditedContent.Save()" md-button="flat: true;" md-waves="color: accent;" class="modal-action modal-close">Save</a>
                    <a md-button="flat: true;" md-waves="color: accent;" class="modal-action modal-close">Close</a>
                </div>
                <!-- <explore-edit selection.bind="EditedContent" action-name='edit'></explore-edit> -->
            </div>

        </div>
        <add-content view-model.ref="addContentComponent" parent.bind="Selection"></add-content>
        <compose view="./explore-fab.html"></compose>

    </section>
</template>